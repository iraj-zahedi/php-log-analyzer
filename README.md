# ØªØ­Ù„ÛŒÙ„Ú¯Ø± Ø¬Ø§Ù…Ø¹ Ù„Ø§Ú¯ Ø³Ø±ÙˆØ± Ø¨Ø§ PHP
[Ø§Ø³Ú©Ø±ÛŒÙ† Ø´Ø§Øª 1](https://raw.githubusercontent.com/iraj-zahedi/php-log-analyzer/refs/heads/main/log-analyzer1.png)

[Ø§Ø³Ú©Ø±ÛŒÙ† Ø´Ø§Øª 2](https://raw.githubusercontent.com/iraj-zahedi/php-log-analyzer/refs/heads/main/log-analyzer2.png)

[Ø§Ø³Ú©Ø±ÛŒÙ† Ø´Ø§Øª 3](https://raw.githubusercontent.com/iraj-zahedi/php-log-analyzer/refs/heads/main/log-analyzer3.png)

[Ø§Ø³Ú©Ø±ÛŒÙ† Ø´Ø§Øª 4](https://raw.githubusercontent.com/iraj-zahedi/php-log-analyzer/refs/heads/main/log-analyzer4.png)

Ø§Ø¨Ø²Ø§Ø±ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ØŒ Ø³Ø¨Ú© Ùˆ **ØªÚ©-ÙØ§ÛŒÙ„ÛŒ** Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ø¢Ù†ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ± Ù„ÛŒÙ†ÙˆÚ©Ø³. Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø­Ù…Ù„Ø§ØªØŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ Ùˆ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ø±Ø§ Ø¨Ù‡ Ø³Ø±Ø¹Øª Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø§Ø² Ø·Ø±ÛŒÙ‚ ÛŒÚ© Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ Ùˆ ØªØ¹Ø§Ù…Ù„ÛŒØŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø§Ù†ÛŒØªÙˆØ± Ú©Ù†ÛŒØ¯.

Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ØŒ Ú©Ø§Ù…Ù¾ÙˆØ²Ø± ÛŒØ§ Ù‡Ø±Ú¯ÙˆÙ†Ù‡ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ø³Ø±ÙˆØ±ØŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† ÙˆØ¨ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø§Ù…Ù†ÛŒØª Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø§Ø³Øª.


---

## âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ

### Û±. Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ØªØ¹Ø§Ù…Ù„ÛŒ Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯
-   **Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± ØªØ¨:** ØªÙÚ©ÛŒÚ© Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¯Ø± Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ "Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡"ØŒ "Ø¢Ù…Ø§Ø±Ù‡Ø§" Ùˆ "Ù…Ù‡Ø§Ø¬Ù…Ø§Ù† Ø¨Ø±ØªØ±".
-   **Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯:** Ø¬Ø³ØªØ¬ÙˆÛŒ ÛŒÚ© Ø¹Ø¨Ø§Ø±Øª (Ù…Ø§Ù†Ù†Ø¯ IP ÛŒØ§ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§) Ø¯Ø± **ØªÙ…Ø§Ù…** ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¢Ù†ÛŒ.
-   **Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ (Google Charts):** Ù†Ù…Ø§ÛŒØ´ ØªØµÙˆÛŒØ±ÛŒ Ø¢Ù…Ø§Ø±Ù‡Ø§ØŒ Ø§Ø² Ø¬Ù…Ù„Ù‡ Ù†Ù‚Ø´Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø­Ù…Ù„Ø§ØªØŒ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ Ø¯Ø± Û²Û´ Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡ Ùˆ Ø¯Ø±ØµØ¯ Ø§Ù†ÙˆØ§Ø¹ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§.
-   **Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯:** Ø§Ù…Ú©Ø§Ù† Ú©Ù„ÛŒÚ© Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø± Ø±ÙˆÛŒ IP Ù…Ù‡Ø§Ø¬Ù…Ø§Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ…Ø§Ù… ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø§Ø² Ø¢Ù†â€ŒÙ‡Ø§.
-   **ÙÛŒÙ„ØªØ±Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡:** ÙØ¹Ø§Ù„ ÛŒØ§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù†Ù…Ø§ÛŒØ´ Ø§Ù†ÙˆØ§Ø¹ Ø®Ø§ØµÛŒ Ø§Ø² Ù„Ø§Ú¯â€ŒÙ‡Ø§.

### Û². ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ø§Ù…Ù†ÛŒØªÛŒ
-   **ÙˆØ¨â€ŒØ³Ø±ÙˆØ± (Apache):** Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒØŒ Ù…Ø´Ú©Ù„Ø§Øª SSL Ùˆ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ PHP-FPM.
-   **ÙØ§ÛŒØ±ÙˆØ§Ù„ ÙˆØ¨ (ModSecurity):** Ù†Ù…Ø§ÛŒØ´ Ø­Ù…Ù„Ø§Øª Ø´Ù†Ø§Ø³Ø§ÛŒÛŒâ€ŒØ´Ø¯Ù‡ Ùˆ Ù…Ø³Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· WAF.
-   **Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ (SSH, Email):** ØªØ´Ø®ÛŒØµ Ø­Ù…Ù„Ø§Øª Brute-Force Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ SSH Ùˆ Ø³Ø±ÙˆØ± Ø§ÛŒÙ…ÛŒÙ„ (Dovecot/Exim).
-   **Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ (Fail2ban):** Ù…Ø§Ù†ÛŒØªÙˆØ± Ú©Ø±Ø¯Ù† Ø¹Ù…Ù„Ú©Ø±Ø¯ Fail2ban Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ IPÙ‡Ø§ÛŒ Ù…Ø³Ø¯ÙˆØ¯ ÛŒØ§ Ø¢Ø²Ø§Ø¯ Ø´Ø¯Ù‡ Ùˆ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø¢Ù†.
-   **Ø­Ù…Ù„Ø§Øª ÙˆØ¨:** Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø­Ù…Ù„Ø§Øª Ø±Ø§ÛŒØ¬ Ù…Ø§Ù†Ù†Ø¯ SQL Injection, XSS, Path Traversal Ùˆ Command Injection.

### Û³. Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
-   **Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ú©Ø±Ù†Ù„:** Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Kernel Panic Ùˆ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø±ÛŒ (I/O) Ú©Ù‡ Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ù…Ø´Ú©Ù„Ø§Øª Ø¬Ø¯ÛŒ Ø³Ø±ÙˆØ± Ù‡Ø³ØªÙ†Ø¯.
-   **Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù†Ø§Ø¨Ø¹:** ØªØ´Ø®ÛŒØµ Ù…Ø´Ú©Ù„Ø§Øª Ú©Ù…Ø¨ÙˆØ¯ Ø­Ø§ÙØ¸Ù‡ (OOM Killer) Ùˆ ÙØ±Ø¢ÛŒÙ†Ø¯Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ù‡ Ø§Ø¬Ø¨Ø§Ø± Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
-   **Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ:** Ø«Ø¨Øª Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ± Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø§Ù„Ø§ (Sudo).

---

## ðŸš€ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

Ù†ØµØ¨ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø¨Ø³ÛŒØ§Ø± Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª. Ú©Ø§ÙÛŒØ³Øª ÛŒÚ© ÙØ§ÛŒÙ„ Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ú©Ù†ÛŒØ¯.

### Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§
-   Ø³Ø±ÙˆØ± Ù„ÛŒÙ†ÙˆÚ©Ø³ (VPS ÛŒØ§ Ø§Ø®ØªØµØ§ØµÛŒ).
-   PHP Ù†Ø³Ø®Ù‡ Û·.Û° ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±.
-   Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ØªØ±Ù…ÛŒÙ†Ø§Ù„ Ø³Ø±ÙˆØ± (SSH).

### Ù…Ø±Ø§Ø­Ù„ Ù†ØµØ¨

1.  **Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:** ÙØ§ÛŒÙ„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª (`log_analyzer.php`) Ø±Ø§ Ø¯Ø± Ù…Ø³ÛŒØ± Ø¯Ù„Ø®ÙˆØ§Ù‡ Ø®ÙˆØ¯ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ Ø¯Ø± ÛŒÚ© Ø³Ø§Ø¨â€ŒØ¯Ø§Ù…ÛŒÙ† Ù…Ø§Ù†Ù†Ø¯ `analyzer.yourdomain.com`).

2.  **Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…Ø³ÛŒØ± Ù„Ø§Ú¯â€ŒÙ‡Ø§:** Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ø§ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø± Ø¨Ø®Ø´ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒØŒ Ø¢Ø±Ø§ÛŒÙ‡ `$logFiles` Ø±Ø§ Ù…ØªÙ†Ø§Ø³Ø¨ Ø¨Ø§ Ø³ÛŒØ³ØªÙ…â€ŒØ¹Ø§Ù…Ù„ Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯. **Ø®Ø·ÙˆØ· Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² Ø­Ø§Ù„Øª Ú©Ø§Ù…Ù†Øª Ø®Ø§Ø±Ø¬ Ú©Ù†ÛŒØ¯:**
    ```php
    $logFiles = [
        // Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆØ± CentOS/RHEL Ø¨Ø§ Ø¢Ù¾Ø§Ú†ÛŒ
        '/var/log/httpd/access_log',
        '/var/log/httpd/error_log',
        '/var/log/secure',
        '/var/log/messages',
        '/var/log/maillog',
        '/var/log/fail2ban.log',

        // Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆØ± Debian/Ubuntu Ø¨Ø§ Ø¢Ù¾Ø§Ú†ÛŒ
        // '/var/log/apache2/access.log',
        // '/var/log/apache2/error.log',
        // '/var/log/auth.log',
        // '/var/log/syslog',
    ];
    ```

3.  **ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ (Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡):**
    Ú©Ø§Ø±Ø¨Ø± ÙˆØ¨â€ŒØ³Ø±ÙˆØ± Ø´Ù…Ø§ (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ `apache` Ø¯Ø± CentOS ÛŒØ§ `www-data` Ø¯Ø± Ubuntu) Ø¨Ø§ÛŒØ¯ Ø§Ø¬Ø§Ø²Ù‡ Ø®ÙˆØ§Ù†Ø¯Ù† Ø§ÛŒÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯. Ø¯Ø³ØªÙˆØ±Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ SSH Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
    
    > **Ù†Ú©ØªÙ‡:** Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ `setfacl` Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ØŒ Ø§Ø² `sudo yum install acl` ÛŒØ§ `sudo apt-get install acl` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

    ```bash
    # Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ CentOS/RHEL (Ú©Ø§Ø±Ø¨Ø± apache)
    sudo setfacl -m u:apache:r /var/log/messages /var/log/secure /var/log/maillog /var/log/fail2ban.log

    # Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ Debian/Ubuntu (Ú©Ø§Ø±Ø¨Ø± www-data)
    sudo setfacl -m u:www-data:r /var/log/syslog /var/log/auth.log /var/log/mail.log /var/log/fail2ban.log
    ```

4.  **ðŸ”’ Ø§Ù…Ù†â€ŒØ³Ø§Ø²ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª (Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù…):**
    Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø³ÛŒ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. **Ø­ØªÙ…Ø§Ù‹** Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¢Ù† Ø±Ø§ Ø¨Ø§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø­Ø¯ÙˆØ¯ Ú©Ù†ÛŒØ¯.
    -   ÛŒÚ© ÙØ§ÛŒÙ„ `.htaccess` Ø¯Ø± Ú©Ù†Ø§Ø± Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø®ÙˆØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯Ù‡ Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± Ø¢Ù† Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯ (Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„ Ø±Ù…Ø² Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒØ¯):
        ```apache
        AuthType Basic
        AuthName "Restricted Area"
        AuthUserFile /path/to/your/.htpasswd
        Require valid-user
        ```
    -   Ø¨Ø§ Ø¯Ø³ØªÙˆØ± `htpasswd` ÛŒÚ© ÙØ§ÛŒÙ„ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø³Ø§Ø²ÛŒØ¯ (your_username Ø±Ø§ Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ù„Ø®ÙˆØ§Ù‡ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯):
        ```bash
        htpasswd -c /path/to/your/.htpasswd your_username
        ```

5.  **Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´:** ÙØ§ÛŒÙ„ PHP Ø±Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø®ÙˆØ¯ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±ÛŒ Ú©Ù‡ Ø³Ø§Ø®ØªÛŒØ¯ØŒ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.

---

### Ø¯Ø±Ø¨Ø§Ø±Ù‡ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡

Ø§ÛŒÙ† Ø§ÙØ²ÙˆÙ†Ù‡ ØªÙˆØ³Ø· [Ø§ÛŒØ±Ø¬ Ø²Ø§Ù‡Ø¯ÛŒ](https://blueserver.ir/author/iraj-zahedi)ØŒ Ø¨Ù†ÛŒØ§Ù†â€ŒÚ¯Ø°Ø§Ø± Ùˆ Ù…ØªØ®ØµØµ ÙÙ†ÛŒ Ø²ÛŒØ±Ø³Ø§Ø®Øª Ø¯Ø± [Ø¨Ù„ÙˆØ³Ø±ÙˆØ±](https://blueserver.ir/)ØŒ ØªÙˆØ³Ø¹Ù‡ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. ØªØ®ØµØµ Ù…Ø§ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù…ÛŒØ²Ø¨Ø§Ù†ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡ Ùˆ Ø§Ù…Ù† Ø¨Ø±Ø§ÛŒ ÙˆØ±Ø¯Ù¾Ø±Ø³ Ø§Ø³Øª Ùˆ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø­Ø§ØµÙ„ ØªØ¬Ø±Ø¨Ù‡ Ù…Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø²Ù…ÛŒÙ†Ù‡ Ø§Ø³Øª.

Ø¨Ø±Ø§ÛŒ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ú©Ø§Ù…Ù„â€ŒØªØ± Ø¨Ø§ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±ØŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…Ù‚Ø§Ù„Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± Ø³Ø§ÛŒØª Ø¨Ù„ÙˆØ³Ø±ÙˆØ± ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:
[ØªØ­Ù„ÛŒÙ„Ú¯Ø± Ù„Ø§Ú¯ Ø³Ø±ÙˆØ± Ø¨Ø§ PHP â€“ Ø§Ø¨Ø²Ø§Ø± Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ø¨Ù„ÙˆØ³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯](https://blueserver.ir/blueserver-php-log-analyzer)





A powerful, lightweight, **single-file** PHP script for real-time analysis of Linux server logs. This tool helps you quickly identify attacks, system errors, and security events through an interactive, graphical dashboard.

This analyzer works without a database, Composer, or any external dependencies, making it ideal for server administrators, web developers, and security specialists.

---

## âœ¨ Key Features

### 1. Interactive & Smart Dashboard
-   **Tab-based Interface:** Cleanly separates reports into "Live Events," "Statistics," and "Top Attackers."
-   **Powerful Global Search:** Instantly search for any term (like an IP address or error message) across **all** configured log files.
-   **Graphical Charts (Google Charts):** Visualize your data, including a geo-map of attack origins, an event timeline for the last 24 hours, and a breakdown of event types.
-   **Smart, Clickable Links:** Click directly on an attacker's IP to view a comprehensive list of all their logged activities.
-   **Advanced Filtering:** Easily toggle the visibility of specific log types to focus on what matters.

### 2. Comprehensive Security Analysis
-   **Web Server (Apache):** Detects access errors, SSL negotiation issues, and PHP-FPM-related faults.
-   **Web Application Firewall (ModSecurity):** Displays attacks that have been identified and blocked by the WAF.
-   **Services (SSH, Email):** Identifies Brute-Force attacks against SSH and email servers (Dovecot/Exim).
-   **Security Software (Fail2ban):** Monitors Fail2ban's performance, showing banned/unbanned IPs and any operational errors.
-   **Web Attacks:** Detects common attack attempts like SQL Injection, XSS, Path Traversal, and Command Injection.

### 3. System Health Monitoring
-   **Critical Kernel Errors:** Identifies Kernel Panics and hardware I/O errors that may indicate serious server issues.
-   **Resource Management:** Detects out-of-memory problems (OOM Killer) and processes that were forcibly terminated.
-   **System Events:** Logs server reboots and the use of privileged commands (Sudo).

---

## ðŸš€ Installation & Setup

Setup is incredibly simple. Just upload and configure a single file.

### Prerequisites
-   A Linux server (VPS or Dedicated).
-   PHP version 7.0 or higher.
-   SSH access to the server.

### Installation Steps

1.  **Upload the Script:** Upload the `log_analyzer.php` file to your desired path on the server (e.g., within a subdomain like `analyzer.yourdomain.com`).

2.  **Configure Log Paths:** Open the script and, in the configuration section, edit the `$logFiles` array to match your server's operating system. **Uncomment the lines corresponding to the logs that exist on your server:**
    ```php
    $logFiles = [
        // Example for a CentOS/RHEL server with Apache
        '/var/log/httpd/access_log',
        '/var/log/httpd/error_log',
        '/var/log/secure',
        '/var/log/messages',
        '/var/log/maillog',
        '/var/log/fail2ban.log',

        // Example for a Debian/Ubuntu server with Apache
        // '/var/log/apache2/access.log',
        // '/var/log/apache2/error.log',
        // '/var/log/auth.log',
        // '/var/log/syslog',
    ];
    ```

3.  **Set Permissions (Crucial Step):**
    Your web server user (typically `apache` on CentOS or `www-data` on Ubuntu) needs permission to read these files. Run the following commands via SSH:
    
    > **Note:** If `setfacl` is not installed, use `sudo yum install acl` or `sudo apt-get install acl`.

    ```bash
    # Example for CentOS/RHEL (apache user)
    sudo setfacl -m u:apache:r /var/log/messages /var/log/secure /var/log/maillog /var/log/fail2ban.log

    # Example for Debian/Ubuntu (www-data user)
    sudo setfacl -m u:www-data:r /var/log/syslog /var/log/auth.log /var/log/mail.log /var/log/fail2ban.log
    ```

4.  **ðŸ”’ Secure the Script (Very Important!):**
    This script displays sensitive information. You **must** restrict access to it with a password.
    -   Create a `.htaccess` file in the same directory as your script and add the following content (adjust the path to your password file):
        ```apache
        AuthType Basic
        AuthName "Restricted Area"
        AuthUserFile /path/to/your/.htpasswd
        Require valid-user
        ```
    -   Use the `htpasswd` command to create a password file (replace `your_username` with a username of your choice):
        ```bash
        htpasswd -c /path/to/your/.htpasswd your_username
        ```

5.  **View the Report:** Open the PHP file in your browser and log in with the username and password you just created.

---
